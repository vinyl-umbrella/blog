---
import BlogListLayout from '../../layouts/BlogListLayout.astro';
import type { GetStaticPathsOptions, Page } from 'astro';
import type { CollectionEntry } from 'astro:content';
import { getCollection } from 'astro:content';
import Pages from '../../components/Pages.astro';
import BlogCard from '../../components/BlogCard.astro';

const title = 'Tech Blog';
export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
  let collection = await getCollection('tech');
  collection = collection.sort((a, b) => {
    return a.data.pubDate > b.data.pubDate ? -1 : 1;
  });

  return paginate(collection, { pageSize: 10 });
}

const { page } = Astro.props as {
  page: Page<CollectionEntry<'tech'>>;
};
---

<BlogListLayout
  title={title}
  ogDesc='ITに関する学んだ技術・スキル・直面した課題とその解決法などの記事をまとめています'
>
  <h1 class='text-4xl font-semibold text-cyan-400'>{title}</h1>
  <div>
    {
      page.data.map((data) => (
        <>
          <BlogCard href={`/tech/${data.slug}`} frontmatter={data.data} />
        </>
      ))
    }
    <Pages prev={page.url.prev} next={page.url.next} />
  </div>
</BlogListLayout>
